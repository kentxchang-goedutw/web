<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>單元二單字</title>
    <style>
        :root {
            --primary-color: #00f9ff; /* 原科技藍色 */
            --secondary-color: #ffd700; /* 金色 */
            --background-gradient: linear-gradient(to right, #2c5364, #203a43, #0f2027);
            --text-shadow-color: #00f9ff;
        }

        /* 淡紫色配色方案 */
        .purple-theme {
            --primary-color: #b19cd9; /* 淡紫色 */
            --secondary-color: #e6e6fa; /* 淡紫色的亮色 */
            --background-gradient: linear-gradient(to right, #d8bfd8, #dda0dd, #e6e6fa);
            --text-shadow-color: #b19cd9;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: var(--background-gradient);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            color: #ffffff;
            position: relative; /* To position the footer text */
        }

        @keyframes neon-glow {
            0%, 100% {
                text-shadow: 0 0 10px var(--text-shadow-color), 0 0 20px var(--text-shadow-color), 0 0 30px var(--text-shadow-color), 0 0 40px var(--text-shadow-color), 0 0 50px var(--text-shadow-color), 0 0 60px var(--text-shadow-color), 0 0 70px var(--text-shadow-color);
            }
            50% {
                text-shadow: 0 0 20px var(--text-shadow-color), 0 0 30px var(--text-shadow-color), 0 0 40px var(--text-shadow-color), 0 0 50px var(--text-shadow-color), 0 0 60px var(--text-shadow-color), 0 0 70px var(--text-shadow-color), 0 0 80px var(--text-shadow-color);
            }
        }

        .container {
            width: 90%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 249, 255, 0.5);
            border: 2px solid var(--primary-color);
            animation: pulse 2s infinite;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .container.show {
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(0, 249, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 30px rgba(0, 249, 255, 1);
            }
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .word-button {
            margin: 10px;
            padding: 20px 40px;
            font-size: 24px;
            border: none;
            border-radius: 15px;
            background: var(--primary-color);
            color: #000;
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .word-button:hover {
            background: #0f2027;
            color: var(--primary-color);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
        }

        .flashcard-container, .game-container {
            display: none;
            width: 90%;
            height: 80%;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            position: relative;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 249, 255, 0.7);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .flashcard-container.show, .game-container.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .flashcard {
            width: 600px;
            height: 450px;
            border: 2px solid var(--primary-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            text-align: center;
            position: relative;
            user-select: none;
            background: linear-gradient(135deg, #0f2027 0%, var(--primary-color) 100%);
            box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.8s, background-color 0.5s, box-shadow 0.5s, opacity 0.6s ease, transform 0.6s ease;
            animation: neon-glow 1.5s infinite alternate;
            opacity: 0;
            transform: translateY(20px);
            border-radius: 15px;
        }

        .flashcard.show {
            opacity: 1;
            transform: translateY(0);
        }

        .flashcard.flip {
            transform: rotateY(180deg);
        }

        .flashcard-content {
            position: absolute;
            backface-visibility: hidden;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 0 10px var(--primary-color);
            padding: 20px;
            border-radius: 15px;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .flashcard img {
            width: 40px;
            height: 40px;
            position: absolute;
            bottom: 10px;
            right: 10px;
            cursor: pointer;
            filter: drop-shadow(0 0 10px #000);
        }

        .game-card {
            width: 150px;
            height: 100px;
            border: 2px solid var(--primary-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            text-align: center;
            position: relative;
            user-select: none;
            background: linear-gradient(135deg, #0f2027 0%, var(--primary-color) 100%);
            box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.8s, background-color 0.5s, box-shadow 0.5s;
            margin: 10px;
            animation: neon-glow 1.5s infinite alternate;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
            border-radius: 15px;
        }

        .game-card.show {
            opacity: 1;
            transform: translateY(0);
        }

        .game-card.flip {
            transform: rotateY(180deg);
        }

        .game-card-content {
            position: absolute;
            backface-visibility: hidden;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 0 10px var(--primary-color);
            border-radius: 15px;
        }

        .game-card-back {
            transform: rotateY(180deg);
        }

        .timer {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-color);
        }

        .countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
            animation: neon-glow 1s infinite alternate;
        }

        .message {
            position: absolute;
            top: -40px; /* Adjusted position */
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-color);
        }

        .buttons {
            margin-top: 20px;
        }

        .buttons button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background: var(--secondary-color);
            color: #000;
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--secondary-color);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .buttons button:hover {
            background: #0f2027;
            color: var(--secondary-color);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--secondary-color), 0 0 30px var(--secondary-color);
        }

        .footer-text {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 16px;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-color);
        }

        .footer-text a {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: bold;
        }

        .footer-text a:hover {
            text-decoration: underline;
        }

        /* Transparent clickable area */
        .clickable-area {
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 50px;
            height: 50px;
            background-color: transparent;
            cursor: pointer;
        }

        /* Input page styles */
        .input-page {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            color: var(--primary-color);
            padding: 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .input-page.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .input-page h1 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .input-page textarea {
            width: 70%;
            height: 200px;
            background: #0f2027;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 10px;
            font-size: 18px;
            resize: none;
        }

        .input-page button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background: var(--secondary-color);
            color: #000;
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--secondary-color);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .input-page button:hover {
            background: #0f2027;
            color: var(--secondary-color);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--secondary-color), 0 0 30px var(--secondary-color);
        }

        .output-table-container {
            width: 70%;
            height: 200px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            background: #0f2027;
        }

        .output-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            color: var(--primary-color);
        }

        .output-table th, .output-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid var(--primary-color);
        }

        .output-table th {
            background-color: #203a43;
        }

        /* 配色切換按鈕 */
        .color-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
        }

        .color-switcher button {
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .color-switcher .original-theme {
            background-color: #00f9ff;
            color: #000;
            box-shadow: 0 0 10px #00f9ff, 0 0 20px #00f9ff;
        }

        .color-switcher .purple-theme-button {
            background-color: #b19cd9;
            color: #000;
            box-shadow: 0 0 10px #b19cd9, 0 0 20px #b19cd9;
        }

        .color-switcher button:hover {
            transform: scale(1.1);
        }

    </style>
</head>
<body>

<div class="container" id="mainPage" style="display: none;">
    <div class="color-switcher">
        <button class="original-theme">科技藍</button>
        <button class="purple-theme-button">淡紫色</button>
    </div>

    <div class="button-container" id="buttonContainer"><button class="word-button" data-index="0">America</button><button class="word-button" data-index="1">the UK</button><button class="word-button" data-index="2">Taiwan</button><button class="word-button" data-index="3">Japan</button><button class="word-button" data-index="4">east</button><button class="word-button" data-index="5">west</button><button class="word-button" data-index="6">south</button><button class="word-button" data-index="7">north</button></div>
    <div class="buttons">
        <button id="flipGameBtn" style="display: block;">翻牌遊戲</button>
    </div>
</div>

<div class="flashcard-container" id="flashcardContainer" style="display: none;">
    <div class="flashcard show" id="flashcard">
        <div class="flashcard-content flashcard-front">
            <span id="word">go swimming</span>
        </div>
        <div class="flashcard-content flashcard-back">
            <span id="translation">去游泳</span>
        </div>
        <img src="https://img.icons8.com/ios-filled/50/000000/speaker.png" id="speak" alt="Speak">
    </div>

    <div class="buttons">
        <button id="prevBtn">上一個</button>
        <button id="nextBtn">下一個</button>
        <button id="backBtn">回上一頁</button>
    </div>
</div>

<div class="game-container" id="gameContainer" style="display: none;"><div class="message" id="message">預計 10 秒後蓋牌</div><div class="timer" id="timer">00:00</div><div class="countdown" id="countdown">10</div></div>

<div class="footer-text">
    Made by <a href="https://kentxchang.blogspot.tw" target="_blank">阿剛老師</a>
</div>

<!-- Transparent clickable area -->
<div class="clickable-area" id="clickableArea"></div>

<!-- Input page for question input -->
<div class="input-page show" id="inputPage" style="display: flex;">
    <h1>題庫輸入區</h1>
    <textarea id="inputTextarea" placeholder="在此輸入題目，每行用英文,中文格式">America	美國
the UK	英國
Taiwan	台灣
Japan	日本
east	東
west	西
south	南
north	北</textarea>
    <button id="submitBtn">送出</button>
    <div class="output-table-container" id="outputTableContainer">
        <table class="output-table" id="outputTable">
            <thead>
                <tr>
                    <th>英文</th>
                    <th>中文</th>
                </tr>
            </thead>
            <tbody><tr><td>America</td><td>美國</td></tr><tr><td>the UK</td><td>英國</td></tr><tr><td>Taiwan</td><td>台灣</td></tr><tr><td>Japan</td><td>日本</td></tr><tr><td>east</td><td>東</td></tr><tr><td>west</td><td>西</td></tr><tr><td>south</td><td>南</td></tr><tr><td>north</td><td>北</td></tr></tbody>
        </table>
    </div>
    <button id="startGameBtn" style="display: block;">開始遊玩</button>
    <button id="downloadBtn">下載完整遊戲</button>
</div>

<script>
    const defaultWords = [
        {english: "School", chinese: "學校"},
        {english: "Student", chinese: "學生"},
        {english: "Homework", chinese: "作業"},
        {english: "Classroom", chinese: "教室"},
        {english: "Pen", chinese: "筆"},
        {english: "Book", chinese: "書"}
    ];

    let words = [...defaultWords];

    const buttonContainer = document.getElementById('buttonContainer');
    const gameContainer = document.getElementById('gameContainer');
    const flashcardContainer = document.getElementById('flashcardContainer');
    const flashcard = document.getElementById('flashcard');
    const wordElement = document.getElementById('word');
    const translationElement = document.getElementById('translation');
    const speakButton = document.getElementById('speak');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const flipGameBtn = document.getElementById('flipGameBtn');
    const timerElement = document.getElementById('timer');
    const countdownElement = document.getElementById('countdown');
    const messageElement = document.getElementById('message');
    const clickableArea = document.getElementById('clickableArea');
    const inputPage = document.getElementById('inputPage');
    const mainPage = document.getElementById('mainPage');
    const inputTextarea = document.getElementById('inputTextarea');
    const outputTable = document.getElementById('outputTable').querySelector('tbody');
    const startGameBtn = document.getElementById('startGameBtn');
    const submitBtn = document.getElementById('submitBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    let timerInterval;

    let currentIndex = 0;

    // Load the flip sound effect
    const flipSound = new Audio("https://downsc.chinaz.net/Files/DownLoad/sound1/202312/y2387.mp3");
    flipSound.preload = 'auto';

    // Ensure the sound is ready to play
    function playFlipSound() {
        flipSound.play().catch(() => {
            // In case of a play error, catch and handle it here
            document.addEventListener('click', () => {
                flipSound.play();
            }, { once: true });
        });
    }

    function updateCard() {
        playFlipSound();  // Play sound on card update
        flashcard.classList.remove('show');
        flashcard.classList.remove('flip'); // Always ensure it shows the front side
        setTimeout(() => {
            wordElement.textContent = words[currentIndex].english;
            translationElement.textContent = words[currentIndex].chinese;
            flashcard.classList.add('show');
        }, 300);  // Duration of the transition effect
    }

    function speakText(text, lang) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        speechSynthesis.speak(utterance);
    }

    function updateButtons() {
        buttonContainer.innerHTML = "";
        words.forEach((word, index) => {
            const button = document.createElement('button');
            button.className = 'word-button';
            button.textContent = word.english;
            button.setAttribute('data-index', index);
            button.addEventListener('click', () => {
                currentIndex = index;
                playFlipSound();  // Play sound when switching to flashcard view
                buttonContainer.parentElement.classList.remove('show');
                setTimeout(() => {
                    buttonContainer.parentElement.style.display = 'none';
                    flipGameBtn.style.display = 'none';
                    flashcardContainer.classList.add('show');
                    flashcardContainer.style.display = 'flex';
                    updateCard();
                }, 600);
            });
            buttonContainer.appendChild(button);
        });
    }

    function submitData() {
        const inputText = inputTextarea.value.trim();
        if (!inputText) return;

        const newWords = inputText.split('\n').map(line => {
            const [english, chinese] = line.split(/,|\t/).map(item => item.trim());
            return {english, chinese};
        });

        // Clear the previous table content and add new words
        outputTable.innerHTML = '';
        newWords.forEach(word => {
            const row = document.createElement('tr');
            const englishCell = document.createElement('td');
            const chineseCell = document.createElement('td');
            englishCell.textContent = word.english;
            chineseCell.textContent = word.chinese;
            row.appendChild(englishCell);
            row.appendChild(chineseCell);
            outputTable.appendChild(row);
        });

        // Update words and refresh the buttons and game cards
        words = newWords;
        updateButtons();
        startGameBtn.style.display = 'block'; // Show the start game button
    }

    flashcard.addEventListener('click', () => {
        flashcard.classList.toggle('flip');
        playFlipSound();  // Play sound on card flip
    });

    speakButton.addEventListener('click', (e) => {
        e.stopPropagation(); // Prevents flipping the card
        if (flashcard.classList.contains('flip')) {
            speakText(translationElement.textContent, 'zh-TW');
        } else {
            speakText(wordElement.textContent, 'en-US');
        }
    });

    prevBtn.addEventListener('click', () => {
        if (currentIndex > 0) {
            currentIndex--;
            updateCard();
        }
    });

    nextBtn.addEventListener('click', () => {
        if (currentIndex < words.length - 1) {
            currentIndex++;
            updateCard();
        }
    });

    backBtn.addEventListener('click', () => {
        playFlipSound();  // Play sound when returning to main view
        flashcardContainer.classList.remove('show');
        setTimeout(() => {
            flashcardContainer.style.display = 'none';
            buttonContainer.parentElement.style.display = 'flex';
            buttonContainer.parentElement.classList.add('show');
            flipGameBtn.style.display = 'block';
        }, 600);
    });

    // Flip game functionality

    function startFlipGame() {
        playFlipSound();  // Play sound when starting flip game
        buttonContainer.parentElement.classList.remove('show');
        setTimeout(() => {
            buttonContainer.parentElement.style.display = 'none';
            flipGameBtn.style.display = 'none';
            gameContainer.classList.add('show');
            gameContainer.style.display = 'flex';
            createGameCards();
            startCountdown(10);  // Start countdown from 10 seconds
        }, 600);
    }

    function startCountdown(seconds) {
        countdownElement.textContent = seconds;
        messageElement.textContent = `預計 ${seconds} 秒後蓋牌`;

        const countdownInterval = setInterval(() => {
            seconds--;
            countdownElement.textContent = seconds;
            messageElement.textContent = `預計 ${seconds} 秒後蓋牌`;

            if (seconds <= 0) {
                clearInterval(countdownInterval);
                countdownElement.style.display = 'none';
                messageElement.style.display = 'none';
                hideAllCards();
                startTimer();
            }
        }, 1000);
    }

    function createGameCards() {
        const cards = [];
        words.forEach(word => {
            cards.push({text: word.english, pair: word.chinese});
            cards.push({text: word.chinese, pair: word.english});
        });
        const shuffledCards = cards.sort(() => 0.5 - Math.random());
        shuffledCards.forEach(cardData => {
            const card = document.createElement('div');
            card.classList.add('game-card');
            card.innerHTML = `<div class="game-card-content">${cardData.text}</div>`;
            card.dataset.pair = cardData.pair;
            card.addEventListener('click', () => flipCard(card));
            gameContainer.appendChild(card);
            setTimeout(() => {
                card.classList.add('show');
            }, 10);
        });
    }

    function hideAllCards() {
        document.querySelectorAll('.game-card').forEach(card => {
            card.classList.add('flip');
        });
    }

    let flippedCards = [];
    let matchesFound = 0;
    let startTime;

    function flipCard(card) {
        if (flippedCards.length < 2 && card.classList.contains('flip')) {
            card.classList.remove('flip');
            flippedCards.push(card);
            playFlipSound();  // Play sound on each flip
            if (flippedCards.length === 2) {
                checkForMatch();
            }
        }
    }

    function checkForMatch() {
        const [firstCard, secondCard] = flippedCards;
        if (firstCard.dataset.pair === secondCard.textContent.trim() && 
            secondCard.dataset.pair === firstCard.textContent.trim()) {
            setTimeout(() => {
                firstCard.style.visibility = 'hidden';
                secondCard.style.visibility = 'hidden';
                matchesFound += 1;
                flippedCards = [];
                if (matchesFound === words.length) {
                    setTimeout(endGame, 500);
                }
            }, 500);
        } else {
            setTimeout(() => {
                firstCard.classList.add('flip');
                secondCard.classList.add('flip');
                flippedCards = [];
            }, 1000);
        }
    }

    function startTimer() {
        startTime = new Date();
        timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
        const elapsedTime = Math.round((new Date() - startTime) / 1000);
        const minutes = String(Math.floor(elapsedTime / 60)).padStart(2, '0');
        const seconds = String(elapsedTime % 60).padStart(2, '0');
        timerElement.textContent = `${minutes}:${seconds}`;
    }

    function endGame() {
        clearInterval(timerInterval);
        const endTime = new Date();
        const timeTaken = Math.round((endTime - startTime) / 1000);
        alert(`遊戲完成！總共花了 ${timeTaken} 秒`);
        resetGame();
    }

    function resetGame() {
        gameContainer.innerHTML = '<div class="message" id="message">預計 10 秒後蓋牌</div><div class="timer" id="timer">00:00</div><div class="countdown" id="countdown">10</div>';
        matchesFound = 0;
        flippedCards = [];
        buttonContainer.parentElement.style.display = 'flex';
        buttonContainer.parentElement.classList.add('show');
        flipGameBtn.style.display = 'block';
        gameContainer.style.display = 'none';
        gameContainer.classList.remove('show');
        clearInterval(timerInterval);
    }

    flipGameBtn.addEventListener('click', startFlipGame);

    // Input page switching
    function showInputPage() {
        mainPage.classList.remove('show');
        setTimeout(() => {
            mainPage.style.display = 'none';
            inputPage.classList.add('show');
            inputPage.style.display = 'flex';
        }, 600);
    }

    clickableArea.addEventListener('click', showInputPage);

    document.addEventListener('keydown', (e) => {
        if (e.key === 'r') {
            showInputPage();
        }
    });

    // Submit new words
    submitBtn.addEventListener('click', () => {
        submitData();
    });

    // Start the game with the new words
    startGameBtn.addEventListener('click', () => {
        inputPage.classList.remove('show');
        setTimeout(() => {
            inputPage.style.display = 'none';
            mainPage.classList.add('show');
            mainPage.style.display = 'flex';
        }, 600);
    });

    // Auto submit and start game if data exists
    window.addEventListener('load', () => {
        if (inputTextarea.value.trim() !== "") {
            submitData();
            startGameBtn.click(); // Automatically start the game
        }
    });

    // Download the complete game with the current input
    downloadBtn.addEventListener('click', () => {
        const originalHtml = document.documentElement.outerHTML;
        const updatedHtml = originalHtml.replace(
            /<textarea id="inputTextarea"[^>]*>[\s\S]*?<\/textarea>/,
            `<textarea id="inputTextarea" placeholder="在此輸入題目，每行用英文,中文格式">${inputTextarea.value}</textarea>`
        );

        const blob = new Blob([updatedHtml], {type: 'text/html'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'custom_game.html';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });

    // Theme switcher logic
    document.querySelector('.original-theme').addEventListener('click', () => {
        document.documentElement.classList.remove('purple-theme');
    });

    document.querySelector('.purple-theme-button').addEventListener('click', () => {
        document.documentElement.classList.add('purple-theme');
    });

    // Show the initial container with effect
    window.addEventListener('load', () => {
        setTimeout(() => {
            mainPage.classList.add('show');
        }, 100);
    });
</script>



</body></html>